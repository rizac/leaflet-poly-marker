
L.PolygonMarker=L.Polygon.extend({options:{type:"^",radius:10,side:null},markers:{s:[45,4],d:[0,4],D:[0,4],p:[18,5],h:[30,6],H:[0,6],"^":[-30,3],v:[-90,3],"<":[60,3],">":[0,3],8:[22.5,8]},initialize:function(t,...n){if(2==n.length){var[o,n]=n;n.type=o}else n=n[0];n.type in this.markers||(n.type="s"),L.Util.setOptions(this,n),L.Polygon.prototype.initialize.call(this,[],n),Array.isArray(t)&&(t=L.latLng(t[0],t[1])),this._latlng=t},onRemove:function(){delete this._mapZoom,L.Polygon.prototype.onRemove.call(this)},getCenter:function(){return this._latlng},_project:function(){this._map&&this._map.getZoom()!==this._mapZoom&&(this._mapZoom=this._map.getZoom(),this._setLatLngs(this.computeLatLngs(this._map))),L.Polygon.prototype._project.call(this)},computeLatLngs:function(t){var n=this.options.type,[o,i]=this.markers[n],[e,a,s,l]=[Math.PI,Math.cos,Math.sin,Math.abs];o=e*o/180;var r=2*e/i,p=new Array(i).fill(0).map((t,n)=>n*r+o),h=size/2,g=this._latlng,m=t.latLngToLayerPoint(g),y=p.map(function(n,o){var[i,e]=[h*a(n),h*s(n)];return t.layerPointToLatLng(new L.Point(m.x+i,m.y+e))});if("d"==n){var c=l(y[0].lng-y[2].lng)/4;y[0].lng-=c,y[2].lng+=c}return y}});